<main class="auth-page">
    <section class="auth-container" aria-labelledby="login-title">
      <mat-card class="auth-card" role="form">
        <header class="auth-header">
          <h1 id="login-title">Entrar</h1>
          <p>Faça login para acessar sua agenda de contatos.</p>
        </header>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>E-mail</mat-label>
              <input
                matInput
                type="email"
                formControlName="email"
                autocomplete="email"
                required
                aria-required="true"
              />
              <mat-error *ngIf="email?.hasError('required')">
                E-mail é obrigatório.
              </mat-error>
              <mat-error *ngIf="email?.hasError('email') && !email?.hasError('required')">
                Informe um e-mail válido.
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Senha</mat-label>
              <input
                matInput
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                autocomplete="current-password"
                required
                aria-required="true"
              />
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="hidePassword = !hidePassword"
                [attr.aria-label]="hidePassword ? 'Mostrar senha' : 'Ocultar senha'"
                [attr.aria-pressed]="!hidePassword"
              >
                <mat-icon>{{ hidePassword ? 'visibility' : 'visibility_off' }}</mat-icon>
              </button>
              <mat-error *ngIf="password?.hasError('required')">
                Senha é obrigatória.
              </mat-error>
              <mat-error *ngIf="password?.hasError('minlength') && !password?.hasError('required')">
                Senha deve ter pelo menos 6 caracteres.
              </mat-error>
            </mat-form-field>
          </div>
  
          <section class="auth-error" *ngIf="authError">
            <p role="alert">{{ authError }}</p>
          </section>
  
          <section class="auth-actions">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="loading"
            >
              <span *ngIf="!loading">Entrar</span>
              <mat-progress-spinner
                *ngIf="loading"
                mode="indeterminate"
                diameter="20"
              ></mat-progress-spinner>
            </button>
          </section>
  
          <footer class="auth-footer">
            <p>
              Ainda não tem conta?
              <a routerLink="/auth/signup">Criar conta</a>
            </p>
            <p>Ou</p>
            <p>
              Voltar para a página
              <a routerLink="/home">inicial.</a>
            </p>
          </footer>
        </form>
      </mat-card>
    </section>
  </main>
  